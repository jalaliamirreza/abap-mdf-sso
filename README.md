# ๐ข SAP Payroll to SSO DBF Converter
# ุชุจุฏูโฺฉููุฏู ุญููู ู ุฏุณุชูุฒุฏ SAP ุจู ูุฑูุช DBF ุณุงุฒูุงู ุชุงูู ุงุฌุชูุงุน

[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## ๐ฏ ูฺฺฏโูุง ฺฉูุฏ

- โ **ุชุจุฏู ุฏูุทุฑูู CSV โ DBF**
- โ **ุฑุงุจุท ฺฏุฑุงูฺฉ ฺฉุงุฑุจุฑูพุณูุฏ** (GUI ุจุง tkinter)
- โ **Iran System Encoding** (100% ุฏูู ู ุชุณุช ุดุฏู)
- โ **ูพุดุชุจุงู ฺฉุงูู ุงุฒ ูุชู ูุงุฑุณ**
- โ **ุฏู ูุงู: Header + Workers** (dskkar00.dbf + dskwor00.dbf)
- โ **ูุญุงุณุจู ุฎูุฏฺฉุงุฑ ุญู ุจูู** (7%)
- โ **ุชุทุงุจู ฺฉุงูู ุจุง ุณุงุฎุชุงุฑ ูุงูุน SSO**
- โ **ุงุจุฒุงุฑูุง CLI ู GUI** ุจุฑุง ุชุจุฏู ูุงูโูุง

## ๐ ุงุณุชูุงุฏู ุณุฑุน (Quick Start)

### ุฑูุด ุงูู: ุฑุงุจุท ฺฏุฑุงูฺฉ (GUI) - ูพุดููุงุฏ

```bash
python tools/dbf_converter_gui.py
```

### ุฑูุด ุฏูู: ุฎุท ูุฑูุงู (CLI)

**ุชุจุฏู CSV ุจู DBF:**
```bash
python tools/csv_to_dbf_complete.py sample/header.csv sample/workers.csv \
    --workshop-id "1234567890" --year 3 --month 9 --output-dir output
```

**ุชุจุฏู DBF ุจู CSV:**
```bash
python tools/dbf_to_csv.py sample/dskkar00.dbf -o output/header.csv --include-hex
python tools/dbf_to_csv.py sample/dskwor00.dbf -o output/workers.csv --include-hex
```

---

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
๐ abap-mdf-sso/
โโโ ๐ tools/              # ุงุจุฒุงุฑูุง ุชุจุฏู
โ   โโโ csv_to_dbf_complete.py   # ุชุจุฏู CSV โ DBF (2 ูุงู)
โ   โโโ dbf_to_csv.py            # ุชุจุฏู DBF โ CSV (ุชฺฉ ูุงู)
โ   โโโ dbf_converter_gui.py     # ุฑุงุจุท ฺฏุฑุงูฺฉ
โโโ ๐ src/
โ   โโโ utils/
โ       โโโ iran_system_encoding.py  # ุงูฺฉูุฏุฑ Iran System
โโโ ๐ sample/            # ูุงูโูุง ููููู
โ   โโโ header.csv
โ   โโโ workers.csv
โ   โโโ dskkar00.dbf
โ   โโโ dskwor00.dbf
โโโ ๐ docs/              # ูุณุชูุฏุงุช ูู
    โโโ REAL_STRUCTURE_ANALYSIS.md
    โโโ ENCODING_VERIFIED.md
```

---

## ๐ ุชูุถุญุงุช ูุงุฑุณ

ุงู ูพุฑูฺู ูุฌููุนูโุง ุงุฒ ุงุจุฒุงุฑูุง ุชุจุฏู ูุงู ุจุฑุง ุชููุฏ **ุฏุณฺฉุช ุจูู ุณุงุฒูุงู ุชุงูู ุงุฌุชูุงุน** ุงุฑุงู ุงุณุช.

### ฺู ฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏุ

ุงู ุจุฑูุงูู ูุงูโูุง **CSV** ุญุงู ุงุทูุงุนุงุช ุญููู ู ุฏุณุชูุฒุฏ ูพุฑุณูู ุฑุง ุจู ูุฑูุช **DBF** (ุฏโุจุณ) ููุฑุฏ ูุงุฒ ุณุงุฒูุงู ุชุงูู ุงุฌุชูุงุน ุชุจุฏู ูโฺฉูุฏุ ู ุจุฑุนฺฉุณ.

### ุงูฺฉุงูุงุช

- โ **ุชุจุฏู CSV โ DBF**: ุฏู ูุงู CSV (header + workers) โ ุฏู ูุงู DBF (dskkar00 + dskwor00)
- โ **ุชุจุฏู DBF โ CSV**: ุฏู ูุงู DBF โ ุฏู ูุงู CSV ุจุง ููุงุด Hex ุจุฑุง ูุชู ูุงุฑุณ
- โ **ุฑุงุจุท ฺฏุฑุงูฺฉ**: ูุฑูโุงูุฒุงุฑ GUI ุจุง ูพุดุชุจุงู ฺฉุงูู ุงุฒ ุฒุจุงู ูุงุฑุณ
- โ **ุงูฺฉูุฏูฺฏ Iran System**: ูพุงุฏูโุณุงุฒ ฺฉุงูู ุงูฺฉูุฏูฺฏ ุงุฎุชุตุงุต ุชุงูู ุงุฌุชูุงุน
- โ **ูุญุงุณุจู ุฎูุฏฺฉุงุฑ**: ูุญุงุณุจู ุฎูุฏฺฉุงุฑ ุญู ุจูู (7ูช) ู ุฌูุนโูุง ฺฉู
- โ **ุณุงุฎุชุงุฑ ุงุณุชุงูุฏุงุฑุฏ**: ุชุทุงุจู 100ูช ุจุง ุณุงุฎุชุงุฑ ูุงูุน ูุงูโูุง SSO

### ููุฏูุง ุงุตู ุฏุณฺฉุช ุจูู

ูุงู DBF ุชุงูู ุงุฌุชูุงุน ุดุงูู ููุฏูุง ุฒุฑ ุงุณุช:

1. **ุดูุงุฑู ุจูู** (Insurance Number)
2. **ฺฉุฏ ูู** (National ID)
3. **ูุงู** (First Name)
4. **ูุงู ุฎุงููุงุฏฺฏ** (Last Name)
5. **ูุงู ูพุฏุฑ** (Father's Name)
6. **ุชุงุฑุฎ ุชููุฏ** (Birth Date)
7. **ุฑูุฒูุง ฺฉุงุฑฺฉุฑุฏ** (Working Days)
8. **ุญููู ูุจูุง** (Base Salary)
9. **ุงุถุงูู ฺฉุงุฑ** (Overtime)
10. **ูุฒุงุง ูุดููู** (Taxable Benefits)
11. **ุฌูุน ูุฒุงุง** (Total Benefits)

### ูุญูู ุงุณุชูุงุฏู

#### ฺฏุงู 1๏ธโฃ: ูุตุจ ูุงุจุณุชฺฏโูุง

```bash
pip install -r requirements.txt
```

#### ฺฏุงู 2๏ธโฃ: ุขูุงุฏูโุณุงุฒ ูุงูโูุง CSV

ุฏู ูุงู CSV ุขูุงุฏู ฺฉูุฏ:

**header.csv** - ุงุทูุงุนุงุช ฺฉุงุฑฺฏุงู (ฺฉ ุฑุฏู):
```csv
DSK_ID,DSK_NAME,DSK_FARM,DSK_ADRS,DSK_KIND,DSK_LISTNO,DSK_DISC,...
1234567890,ุดุฑฺฉุช ููููู,ุนู ุงุญูุฏ,ุชูุฑุงู - ุฎุงุจุงู ููุนุตุฑ,1,LIST001,...
```

**workers.csv** - ุงุทูุงุนุงุช ฺฉุงุฑฺฉูุงู (ฺูุฏ ุฑุฏู):
```csv
DSW_ID1,PER_NATCOD,DSW_FNAME,DSW_LNAME,DSW_DD,DSW_MAH,DSW_MASH,...
12345678,1234567890,ุนู,ุงุญูุฏ,30,8000000,9500000,...
```

ููููู ูุงูโูุง ุฏุฑ ูพูุดู `sample/` ููุฌูุฏ ุงุณุช.

#### ฺฏุงู 3๏ธโฃ: ุงุฌุฑุง ุจุฑูุงูู

##### ุฑูุด ุงูู: GUI (ูพุดููุงุฏ)

```bash
python tools/dbf_converter_gui.py
```

1. ุชุจ **CSV โ DBF** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
2. ูุงูโูุง header.csv ู workers.csv ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. ฺฉุฏ ฺฉุงุฑฺฏุงูุ ุณุงู ู ูุงู ุฑุง ูุงุฑุฏ ฺฉูุฏ
4. ุฑู ุฏฺฉูู "ุชุจุฏู ุจู DBF" ฺฉูฺฉ ฺฉูุฏ

##### ุฑูุด ุฏูู: CLI

```bash
python tools/csv_to_dbf_complete.py sample/header.csv sample/workers.csv \
    --workshop-id "1234567890" \
    --year 3 \
    --month 9 \
    --output-dir output
```

### ูพุดโูุงุฒูุง

- Python 3.8+
- ุณุณุชูโุนุงูู: Windows / Linux / macOS
- ูุงุจุณุชฺฏโูุง Python (ูุตุจ ุฎูุฏฺฉุงุฑ ุงุฒ requirements.txt)

---

## ๐ง ุฌุฒุฆุงุช ูู

### ุณุงุฎุชุงุฑ ูุงูโูุง DBF

ุงู ูพุฑูฺู ุฏู ูุงู DBF ุชููุฏ ูโฺฉูุฏ:

1. **dskkar00.dbf** - ูุงู ูุฏุฑ (26 ููุฏ)
   - ุงุทูุงุนุงุช ฺฉุงุฑฺฏุงู
   - ุฌูุน ฺฉูโูุง ูุงูุงูู
   - ุชุนุฏุงุฏ ฺฉู ฺฉุงุฑฺฉูุงู

2. **dskwor00.dbf** - ูุงู ฺฉุงุฑฺฉูุงู (31 ููุฏ)
   - ุงุทูุงุนุงุช ุดุฎุต ูุฑ ฺฉุงุฑููุฏ
   - ุฑูุฒูุง ฺฉุงุฑฺฉุฑุฏ
   - ุญููู ู ูุฒุงุง
   - ุญู ุจูู ูุญุงุณุจู ุดุฏู

### ุงูฺฉูุฏูฺฏ Iran System

ุงู ูพุฑูฺู ุงุฒ **Iran System Encoding** ุงุณุชูุงุฏู ูโฺฉูุฏ - ฺฉ ุงูฺฉูุฏูฺฏ ุงุฎุชุตุงุต ุจุฑุง ูุชู ูุงุฑุณ ฺฉู ุชูุณุท ุณุงุฒูุงู ุชุงูู ุงุฌุชูุงุน ุงุณุชูุงุฏู ูโุดูุฏ.

ูฺฺฏโูุง:
- 4 ฺฏุฑูู ฺฉุงุฑุงฺฉุชุฑ ุจุฑ ุงุณุงุณ ูููุนุช (ูุฌุฑุฏุ ุงุจุชุฏุงุ ูุณุทุ ุงูุชูุง)
- ุชุจุฏู ุงุฒ Unicode โ Windows-1256 โ Iran System
- ุฏูุช 100ูช ุชุณุช ุดุฏู ุจุง ูุงูโูุง ูุงูุน SSO

ูุณุชูุฏุงุช ฺฉุงูู: `/docs/ENCODING_VERIFIED.md`

### ุณุงุฎุชุงุฑ ฺฉุงูู ููุฏูุง

ูุณุชูุฏุงุช ฺฉุงูู ุณุงุฎุชุงุฑ ูุงูโูุง: `/docs/REAL_STRUCTURE_ANALYSIS.md`

---

## ๐งช ุชุณุช ู ุขุฒูุงุด

### ุชุณุช ุจุง ูุงูโูุง ููููู

```bash
# ุชุจุฏู ูุงูโูุง ููููู CSV ุจู DBF
python tools/csv_to_dbf_complete.py sample/header.csv sample/workers.csv \
    --workshop-id "1234567890" --year 3 --month 9 --output-dir test_output

# ุจุฑุฑุณ ูุงูโูุง ุชููุฏ ุดุฏู
python tools/inspect_dbf.py test_output/dskkar00.dbf
python tools/inspect_dbf.py test_output/dskwor00.dbf

# ุชุจุฏู ุจุฑฺฏุดุช ุจู CSV
python tools/dbf_to_csv.py test_output/dskkar00.dbf -o test_output/header_verify.csv --include-hex
python tools/dbf_to_csv.py test_output/dskwor00.dbf -o test_output/workers_verify.csv --include-hex
```

### ุชุณุช ุงูฺฉูุฏูฺฏ

```bash
# ุจุฑุฑุณ ุฏุฑุณุช ุงูฺฉูุฏูฺฏ ูุงุฑุณ
python -c "from src.utils.iran_system_encoding import IranSystemEncoder; \
    encoder = IranSystemEncoder(); \
    result = encoder.unicode_to_iran_system('ุนู'); \
    print(' '.join(f'{b:02x}' for b in result))"
# ุฎุฑูุฌ ุจุงุฏ ุจุงุดุฏ: fc f3 e4
```

---

## ๐ฆ ุงุจุฒุงุฑูุง ููุฌูุฏ

### 1. csv_to_dbf_complete.py
ุชุจุฏู ฺฉุงูู ุฏู ูุงู CSV ุจู ุฏู ูุงู DBF

**ูุฑูุฏ:**
- header.csv (ุงุทูุงุนุงุช ฺฉุงุฑฺฏุงู)
- workers.csv (ุงุทูุงุนุงุช ฺฉุงุฑฺฉูุงู)

**ุฎุฑูุฌ:**
- dskkar00.dbf (ูุงู ูุฏุฑ)
- dskwor00.dbf (ูุงู ฺฉุงุฑฺฉูุงู)

### 2. dbf_to_csv.py
ุชุจุฏู ูุงู DBF ุจู CSV

**ูฺฺฏโูุง:**
- ููุงุด Hex ุจุฑุง ููุฏูุง ูุงุฑุณ
- ุญูุธ ุณุงุฎุชุงุฑ ุงุตู DBF

### 3. dbf_converter_gui.py
ุฑุงุจุท ฺฏุฑุงูฺฉ ฺฉุงุฑุจุฑูพุณูุฏ

**ูฺฺฏโูุง:**
- ุฏู ุชุจ: CSVโDBF ู DBFโCSV
- ูุจูโูุง ูุงุฑุณ
- ููุงุด ูุงฺฏ ุฏุฑ ุฒูุงู ูุงูุน
- ุงูุชุฎุงุจ ูุงู ุจุง ุฏุงููฺฏ

### 4. inspect_dbf.py
ุงุจุฒุงุฑ ุจุงุฒุฑุณ ู ุชุญูู ูุงูโูุง DBF

**ฺฉุงุฑุจุฑุฏ:**
- ูุดุงูุฏู ุณุงุฎุชุงุฑ ูุงู
- ููุงุด ุฑฺฉูุฑุฏูุง
- ุจุฑุฑุณ ุงูฺฉูุฏูฺฏ

---

## License

This project is proprietary software developed for specific client requirements.

## Support

For issues and questions, please contact the development team.

---

## ูฺฉุงุช ููู

โ๏ธ **ุชูุฌู**:
- ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุงุทูุงุนุงุช ุดูุงุฑู ุจูู ู ฺฉุฏ ูู ุตุญุญ ุงุณุช
- ูุจู ุงุฒ ุงุฑุณุงู ุจู ุณุงุช ุชุงูู ุงุฌุชูุงุนุ ูุงู DBF ุฑุง ุจุง ุฏุงุฏูโูุง ููููู ุชุณุช ฺฉูุฏ
- ุงุฒ ูุณุฎู ูพุดุชุจุงู ูุจู ุงุฒ ุงุฌุฑุง ุจุฑูุงูู ุชูู ฺฉูุฏ
- ูุฑูุช ุชุงุฑุฎ ุจุงุฏ ุดูุณ (ุฌูุงู) ุจุงุดุฏ

## ูุฑุงุฌุน

- [ุณุงุช ุชุงูู ุงุฌุชูุงุน](https://www.tamin.ir)
- SAP HCM Documentation
- dBase File Format Specification
